<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AquaTest</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Poppins:wght@400;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="manifest" href="/manifest.json">
</head>
<body>
    <div class="container">
        <nav class="sticky-nav">
            <button onclick="scrollToSection('water-check')">Sprawdź kranówkę</button>
            <button onclick="scrollToSection('station-finder')">Znajdź stacje</button>
            <button onclick="scrollToSection('bottled-water')">Woda butelkowana</button>
            <button onclick="scrollToSection('world-water')">Porównaj wody</button>
            <button onclick="scrollToSection('quizzes')">Quizy</button>
            <button onclick="scrollToSection('community-section')">Społeczność</button>
            <button onclick="scrollToSection('user-rankings')">Rankingi</button>
            <button onclick="submitVote()">Głosuj</button>
        </nav>

        <section id="water-check" class="section">
            <h1>AquaTest – Pij jak w Japonii!</h1>
            <p>Sprawdź jakość wody kranowej lub butelkowanej!</p>
            <div class="input-result-group">
                <div class="input-box">
                    <input id="city" type="text" placeholder="Wpisz miasto">
                    <div id="city-suggestions"></div>
                    <button id="check-kranowka-btn">Sprawdź kranówkę</button>
                </div>
                <div class="result-section">
                    <h3>Wyniki dla miasta</h3>
                    <div id="city-result" class="result-box"></div>
                    <div id="norms-section" style="display: none; margin-top: 20px;">
                        <h3>Normy dla parametrów wody</h3>
                        <table class="norms-table">
                            <thead>
                                <tr>
                                    <th>Parametr</th>
                                    <th>Polskie</th>
                                    <th>WHO</th>
                                    <th>UE</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>pH</td>
                                    <td>6.5–9.5</td>
                                    <td>6.5–8.5</td>
                                    <td>6.5–9.5</td>
                                </tr>
                                <tr>
                                    <td>Twardość (mg/l CaCO₃)</td>
                                    <td>60–500</td>
                                    <td>Brak limitu (<200 zalecane)</td>
                                    <td>Brak limitu (<150 zalecane)</td>
                                </tr>
                                <tr>
                                    <td>Azotany (mg/l)</td>
                                    <td><50</td>
                                    <td>≤50</td>
                                    <td>≤50</td>
                                </tr>
                                <tr>
                                    <td>Żelazo (mg/l)</td>
                                    <td><0.2</td>
                                    <td>≤0.3</td>
                                    <td>≤0.2</td>
                                </tr>
                                <tr>
                                    <td>Mangan (mg/l)</td>
                                    <td><0.05</td>
                                    <td>≤0.4 (zdrowie), ≤0.1 (smak)</td>
                                    <td>≤0.05</td>
                                </tr>
                                <tr>
                                    <td>Chlorki (mg/l)</td>
                                    <td><250</td>
                                    <td>≤250</td>
                                    <td>≤250</td>
                                </tr>
                                <tr>
                                    <td>Fluorki (mg/l)</td>
                                    <td><1.5</td>
                                    <td>≤1.5</td>
                                    <td>≤1.5</td>
                                </tr>
                                <tr>
                                    <td>Mętność (NTU)</td>
                                    <td><1</td>
                                    <td>≤1</td>
                                    <td>≤1</td>
                                </tr>
                            </tbody>
                        </table>
                        <h3>Głosowanie: Które normy są dla Ciebie najbardziej wiarygodne?</h3>
                        <div id="voting-section">
                            <label><input type="radio" name="norms" value="polish"> Polskie</label><br>
                            <label><input type="radio" name="norms" value="who"> WHO</label><br>
                            <label><input type="radio" name="norms" value="eu"> EU</label><br>
                            <button onclick="submitVote()">Głosuj</button>
                            <p id="vote-results"></p>
                        </div>
                        <p class="norms-note">Normy Polskie, WHO i EU znajdziesz w sekcji <em>Normy wody</em> w przyszłości!</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="station-finder" class="section">
            <h2>Znajdź stację uzdatniania i punkt pomiarowy</h2>
            <div class="input-result-group">
                <div class="input-box">
                    <input id="street" type="text" placeholder="Wpisz ulicę">
                    <input id="city-premium" type="text" placeholder="Wpisz miasto">
                    <div id="city-premium-suggestions"></div>
                    <div class="button-group">
                        <button id="find-station-btn">Znajdź najbliższą stację i punkt</button>
                        <button id="show-suw-btn">Pokaż wszystkie SUW</button>
                        <button id="show-points-btn">Pokaż wszystkie punkty pomiarowe</button>
                        <button id="show-history-btn">Pokaż historię</button>
                    </div>
                    <select id="rankingParameter">
                        <option value="twardosc">Twardość</option>
                        <option value="pH">pH</option>
                        <option value="azotany">Azotany</option>
                        <option value="zelazo">Żelazo</option>
                        <option value="mangan">Mangan</option>
                    </select>
                    <button id="ranking-miast-btn">Pokaż ranking miast</button>
                    <button id="ranking-suw-btn">Ranking SUW</button>
                </div>
            </div>
            <div class="result-section">
                <h3>Mapa</h3>
                <div id="map" style="height: 400px; width: 100%;"></div>
            </div>
            <div class="result-section">
                <h3>Najbliższe stacje i punkty</h3>
                <div id="waterInfo" class="result-box"></div>
            </div>
            <div class="result-section">
                <h3>Wszystkie SUW-y</h3>
                <div id="all-suw" class="result-box"></div>
            </div>
            <div class="result-section">
                <h3>Wszystkie punkty pomiarowe</h3>
                <div id="all-points" class="result-box"></div>
            </div>
            <div class="result-section">
                <h3>Historia</h3>
                <div id="history" class="result-box"></div>
            </div>
            <div class="result-section">
                <h3>Rankingi</h3>
                <div id="rankings" class="result-box"></div>
                <div id="ranking-info"></div>
            </div>
        </section>

        <section id="bottled-water" class="section">
            <h2>Sprawdź wodę butelkowaną</h2>
            <div class="input-result-group">
                <div class="input-box">
                    <input id="bottle" type="text" placeholder="Wpisz markę">
                    <div id="bottle-suggestions"></div>
                    <button id="check-butelkowana-btn">Sprawdź butelkowaną</button>
                    <select id="bottleRankingParameter">
                        <option value="wapn">Wapń</option>
                        <option value="magnez">Magnez</option>
                        <option value="sod">Sód</option>
                        <option value="pH">pH</option>
                        <option value="potas">Potas</option>
                        <option value="fluorki">Fluorki</option>
                    </select>
                    <button id="ranking-bottles-btn">Pokaż ranking wód butelkowanych</button>
                </div>
            </div>
            <div class="result-section">
                <h3>Wyniki dla wody butelkowanej</h3>
                <div id="bottle-result" class="result-box"></div>
            </div>
            <div class="result-section">
                <h3>Ranking wód butelkowanych</h3>
                <div id="bottle-rankings" class="result-box"></div>
            </div>
        </section>

        <section id="world-water" class="section">
            <h2>Porównaj wody świata</h2>
            <div class="input-result-group">
                <div class="input-box">
                    <input id="world-water" type="text" placeholder="Wpisz miasto świata (np. Tokio, Paryż)">
                    <div id="world-water-suggestions"></div>
                    <input id="local-city" type="text" placeholder="Wpisz miasto lokalne (np. Koszalin)">
                    <div id="local-city-suggestions"></div>
                    <button id="compare-world-water-btn">Porównaj</button>
                </div>
            </div>
            <div class="result-section">
                <h3>Porównanie wód</h3>
                <div id="world-water-result" class="result-box"></div>
            </div>
        </section>

        <section id="quizzes" class="section">
            <h2>Wybierz quiz</h2>
            <div class="input-box">
                <button id="quiz-skin-btn" class="quiz-toggle-btn">Quiz o cerze</button>
                <div id="quiz-skin" style="display: none;">
                    <form id="quiz-skin-form">
                        <label>1. Jak opiszesz swoją cerę?</label><br>
                        <input type="radio" name="q1" value="sucha"> Sucha<br>
                        <input type="radio" name="q1" value="normalna"> Normalna<br>
                        <input type="radio" name="q1" value="tłusta"> Tłusta<br><br>
                        <button type="button" id="check-skin-quiz-btn">Sprawdź wynik</button>
                    </form>
                    <div id="quiz-skin-result"></div>
                    <div id="aqua-bot-skin" style="display: none;">
                        <h3>AquaBot – Twój ekspert od wody</h3>
                        <div id="aqua-bot-skin-messages"></div>
                        <div id="aqua-bot-skin-options"></div>
                    </div>
                </div>
                <button id="quiz-wellbeing-btn" class="quiz-toggle-btn">Quiz o samopoczuciu</button>
                <div id="quiz-wellbeing" style="display: none;">
                    <form id="quiz-wellbeing-form">
                        <label>1. Czy czujesz się często przemęczony?</label><br>
                        <input type="radio" name="q1" value="tak"> Tak<br>
                        <input type="radio" name="q1" value="czasami"> Czasami<br>
                        <input type="radio" name="q1" value="nie"> Nie<br><br>
                        <button type="button" id="check-wellbeing-quiz-btn">Sprawdź wynik</button>
                    </form>
                    <div id="quiz-wellbeing-result"></div>
                    <div id="aqua-bot-wellbeing" style="display: none;">
                        <h3>AquaBot – Twój ekspert od wody</h3>
                        <div id="aqua-bot-wellbeing-messages"></div>
                        <div id="aqua-bot-wellbeing-options"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="community-section" class="section">
            <h2>Społeczność</h2>
            <div id="login-box" class="login-box">
                <input id="username" type="text" placeholder="Wpisz nazwę użytkownika">
                <button id="login-btn">Zaloguj</button>
            </div>
            <div id="user-info" style="display: none; margin-bottom: 20px;">
                <span id="current-username"></span> (<span id="user-rank"></span>)
                <button id="toggle-premium">Włącz/Wyłącz Premium</button>
                <button id="logout">Wyloguj</button>
            </div>
            <div class="post-box" style="display: none;" id="post-form">
                <select id="post-category">
                    <option value="problemy">Problemy z wodą</option>
                    <option value="filtry">Filtry</option>
                    <option value="ogolne">Ogólne</option>
                </select>
                <textarea id="post-content" placeholder="Napisz nowy post..." rows="3"></textarea>
                <label><input type="checkbox" id="premium-only-checkbox"> Tylko dla Premium</label>
                <button id="add-post-btn">Opublikuj</button>
            </div>
            <div class="community-controls">
                <select id="post-filter">
                    <option value="problemy">Problemy z wodą</option>
                    <option value="filtry">Filtry</option>
                    <option value="ogolne">Ogólne</option>
                    <option value="wszystkie">Wszystkie</option>
                </select>
                <select id="post-sort">
                    <option value="newest">Najnowsze</option>
                    <option value="popular">Najpopularniejsze</option>
                </select>
            </div>
            <div id="posts-list"></div>
        </section>

        <section id="user-rankings" class="section">
            <h2>Rankingi użytkowników</h2>
            <div class="input-result-group">
                <div class="input-box">
                    <div class="user-ranking-form">
                        <h3>Oceń wodę</h3>
                        <select id="water-type">
                            <option value="kranowa">Woda kranowa</option>
                            <option value="butelkowana">Woda butelkowana</option>
                        </select>
                        <input type="text" id="water-name" placeholder="Nazwa wody (np. Koszalin, Nałęczowianka)">
                        <select id="water-rating">
                            <option value="1">1 gwiazdka</option>
                            <option value="2">2 gwiazdki</option>
                            <option value="3">3 gwiazdki</option>
                            <option value="4">4 gwiazdki</option>
                            <option value="5">5 gwiazdek</option>
                        </select>
                        <button id="submit-rating-btn">Oceń</button>
                        <select id="user-ranking-type">
                            <option value="kranowa">Kranowa</option>
                            <option value="butelkowana">Butelkowana</option>
                            <option value="wszystkie">Wszystkie</option>
                        </select>
                        <button id="show-user-rankings-btn">Pokaż ranking użytkowników</button>
                    </div>
                    <div class="reminders-box">
                        <h2>Przypomnienia o piciu wody</h2>
                        <select id="reminder-frequency">
                            <option value="1">Co 1 godzinę</option>
                            <option value="2" selected>Co 2 godziny</option>
                            <option value="4">Co 4 godziny</option>
                        </select>
                        <button id="toggle-reminders">Włącz przypomnienia</button>
                        <div id="reminder-status"></div>
                    </div>
                    <div class="alerts-box">
                        <h2>Alerty o zmianach w danych</h2>
                        <input id="alert-city" type="text" placeholder="Wpisz miasto">
                        <div id="alert-city-suggestions"></div>
                        <button id="toggle-alerts">Włącz alerty</button>
                        <div id="alert-status"></div>
                    </div>
                </div>
                <div class="result-section">
                    <h3>Rankingi użytkowników</h3>
                    <div id="user-rankings" class="result-box"></div>
                </div>
            </div>
        </section>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>